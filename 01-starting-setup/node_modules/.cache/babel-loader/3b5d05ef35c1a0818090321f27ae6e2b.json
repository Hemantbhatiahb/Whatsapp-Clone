{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hembhati\\\\React Revision\\\\practice-1 ( list - add n delete)\\\\whatspp clone\\\\01-starting-setup\\\\src\\\\components\\\\SidebarChat.js\",\n  _s = $RefreshSig$();\nimport { React } from \"react\";\nimport { Avatar } from \"@material-ui/core\";\nimport \"./SidebarChat.css\";\nimport { useState, useEffect } from \"react\";\nimport db from \"../firebase/firebase\";\nimport { addDoc, collection, doc, onSnapshot, orderBy, query } from \"firebase/firestore\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SidebarChat = props => {\n  _s();\n  var _messages$;\n  const [seed, setSeed] = useState(\"\");\n  const [messages, setMessages] = useState(\"\");\n  const {\n    id\n  } = props;\n  let showLastMessage;\n  useEffect(() => {\n    if (id) {\n      onSnapshot(query(collection(doc(db, \"rooms\", id), \"messages\"), orderBy(\"timestamp\", \"desc\")), snapshot => {\n        setMessages(snapshot.docs.map(doc => doc.data()));\n      });\n    }\n  }, [id]);\n  useEffect(() => {\n    setSeed(id);\n  }, [id]);\n  const createChat = () => {\n    const roomName = prompt(\"Please enter room for chat\");\n    if (roomName) {\n      addDoc(collection(db, \"rooms\"), {\n        name: roomName\n      }).then(docRef => console.log(docRef));\n    }\n  };\n  if ((_messages$ = messages[0]) !== null && _messages$ !== void 0 && _messages$.message) {\n    var _messages$2;\n    showLastMessage = (_messages$2 = messages[0]) === null || _messages$2 === void 0 ? void 0 : _messages$2.message;\n    if (showLastMessage.length > 39) {\n      showLastMessage = showLastMessage.slice(0, 39) + \"...\";\n    }\n  }\n  return props.addNewChat ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sidebarChat\",\n    onClick: createChat,\n    children: /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Add New Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(Link, {\n    to: `/rooms/${props.id}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebarChat\",\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {\n        src: `https://avatars.dicebear.com/api/human/${seed}.svg`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebarChat__info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: props.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: showLastMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s(SidebarChat, \"ocU3XD8qxddkvch5BgJJ/NwpzcE=\");\n_c = SidebarChat;\nexport default SidebarChat;\nvar _c;\n$RefreshReg$(_c, \"SidebarChat\");","map":{"version":3,"names":["React","Avatar","useState","useEffect","db","addDoc","collection","doc","onSnapshot","orderBy","query","Link","SidebarChat","props","seed","setSeed","messages","setMessages","id","showLastMessage","snapshot","docs","map","data","createChat","roomName","prompt","name","then","docRef","console","log","message","length","slice","addNewChat"],"sources":["C:/Users/hembhati/React Revision/practice-1 ( list - add n delete)/whatspp clone/01-starting-setup/src/components/SidebarChat.js"],"sourcesContent":["import { React } from \"react\";\r\nimport { Avatar } from \"@material-ui/core\";\r\nimport \"./SidebarChat.css\";\r\nimport { useState, useEffect } from \"react\";\r\nimport db from \"../firebase/firebase\";\r\nimport {\r\n  addDoc,\r\n  collection,\r\n  doc,\r\n  onSnapshot,\r\n  orderBy,\r\n  query,\r\n} from \"firebase/firestore\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst SidebarChat = (props) => {\r\n  const [seed, setSeed] = useState(\"\");\r\n  const [messages, setMessages] = useState(\"\");\r\n  const { id } = props;\r\n  let showLastMessage;\r\n  useEffect(() => {\r\n    if (id) {\r\n      onSnapshot(\r\n        query(\r\n          collection(doc(db, \"rooms\", id), \"messages\"),\r\n          orderBy(\"timestamp\", \"desc\")\r\n        ),\r\n        (snapshot) => {\r\n          setMessages(snapshot.docs.map((doc) => doc.data()));\r\n        }\r\n      );\r\n    }\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    setSeed(id);\r\n  }, [id]);\r\n\r\n  const createChat = () => {\r\n    const roomName = prompt(\"Please enter room for chat\");\r\n\r\n    if (roomName) {\r\n      addDoc(collection(db, \"rooms\"), {\r\n        name: roomName,\r\n      }).then((docRef) => console.log(docRef));\r\n    }\r\n  };\r\n\r\n  if (messages[0]?.message) {\r\n    showLastMessage = messages[0]?.message;\r\n    if (showLastMessage.length > 39) {\r\n      showLastMessage = showLastMessage.slice(0, 39) + \"...\";\r\n    }\r\n  }\r\n\r\n  return props.addNewChat ? (\r\n    <div className=\"sidebarChat\" onClick={createChat}>\r\n      <h2>Add New Chat</h2>\r\n    </div>\r\n  ) : (\r\n    <Link to={`/rooms/${props.id}`}>\r\n      <div className=\"sidebarChat\">\r\n        <Avatar src={`https://avatars.dicebear.com/api/human/${seed}.svg`} />\r\n        <div className=\"sidebarChat__info\">\r\n          <h2>{props.name}</h2>\r\n          <p>{showLastMessage}</p>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n};\r\nexport default SidebarChat;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}